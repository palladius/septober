<div class="card">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
    <h2>Todos</h2>
    <%= form_with url: todos_path, method: :get, local: true, style: "display: flex; gap: 0.5rem;" do |f| %>
      <%= f.text_field :q, value: params[:q], placeholder: "Search todos...", style: "padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem;" %>
      <%= f.submit "Search", class: "btn btn-secondary" %>
    <% end %>
    <%= link_to "New Todo", new_todo_path, class: "btn btn-primary" %>
  </div>
  <div style="margin-bottom: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
    <strong>Filter by Project:</strong>
    <%= link_to "All", todos_path, class: "btn btn-sm", style: "background-color: #e5e7eb; color: #374151;" %>
    <% Project.where(user_id: current_user.id).each do |proj| %>
      <%= link_to proj.name, todos_path(add_project: proj.name), class: "btn btn-sm", style: "background-color: #{proj.color || '#e5e7eb'}; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.3);" %>
    <% end %>
  </div>

  <div class="todos-list">
    <%= render @todos %>
  </div>
</div>
