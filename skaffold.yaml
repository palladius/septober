apiVersion: skaffold/v2beta26
kind: Config
metadata:
  name: septober
build:
  artifacts:
  - image: sk-septober
    docker:
      dockerfile: Dockerfile
    ######################################################################
    # Syncing app/ of RoR without rebuild with docker - for efficiency
    # Very powerful! Try it Riccardo
    ######################################################################
    sync:
      manual:
      - src:  app/
        dest: app/
      - src:  config/
        dest: config/
      - src:  VERSION
        dest: VERSION
# deploy:
#   kubectl:
#     manifests:
#     - docker-experiments/gke-septober-skaffold.yaml

# Copiato da cloud-ops-sandbox
profiles:
# "gcb" profile allows building and pushing the images
# on Google Container Builder without requiring docker
# installed on the developer machine. However, note that
# since GCB does not cache the builds, each build will
# start from scratch and therefore take a long time.
#
# This is not used by default. To use it, run:
#     skaffold run -p gcb
- name: gcb
  build:
    googleCloudBuild:
      diskSizeGb: 300
      machineType: N1_HIGHCPU_32
      timeout: 4000s
- name: local
  build:
    local:
      push: false
